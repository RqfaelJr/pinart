{% extends 'base.html' %}
{% load static %}

{% block content %}

<!-- CSS Específico desta tela -->
<link rel="stylesheet" href="{% static 'css/notificacoes.css' %}">

<div class="notificacoes-page">
    
    <div class="notificacoes-header">
        <h1 class="page-title">Notificações</h1>
        
        {% if notificacoes %}
        <form action="{% url 'marcar_todas_lidas' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="mark-all-read">
                <span>✓</span> Marcar todas como lidas
            </button>
        </form>
        {% endif %}
    </div>

    <div class="notificacoes-list">
        {% for notif in notificacoes %}
            <!-- Adiciona a classe 'unread' se a notificação não foi lida -->
            <div class="notificacao-card {% if not notif.lida %}unread{% endif %}">
                
                <!-- Lógica de Ícones baseada no tipo -->
                <div class="notif-icon-box 
                    {% if notif.tipo == 'evento' %}icon-evento
                    {% elif notif.tipo == 'social' %}icon-social
                    {% else %}icon-alerta{% endif %}">
                    
                    {% if notif.tipo == 'evento' %}
                        <i class="fa-regular fa-calendar"></i> <!-- Ícone Calendário -->
                    {% elif notif.tipo == 'social' %}
                        <i class="fa-regular fa-user"></i> <!-- Ícone Usuário -->
                    {% else %}
                        <i class="fa-regular fa-bell"></i> <!-- Ícone Sino -->
                    {% endif %}
                </div>

                <div class="notif-content">
                    <h3 class="notif-title">{{ notif.titulo }}</h3>
                    <p class="notif-message">{{ notif.mensagem }}</p>
                    <span class="notif-time">{{ notif.data_hora|timesince }} atrás</span>
                </div>

                {% if not notif.lida %}
                    <div class="unread-dot" title="Não lida"></div>
                {% endif %}
            </div>
        {% empty %}
            <div class="empty-state">
                <i class="fa-regular fa-bell-slash" style="font-size: 40px; margin-bottom: 15px;"></i>
                <p>Você não tem novas notificações no momento.</p>
            </div>
        {% endfor %}
    </div>

</div>

<!-- Se você não usa FontAwesome no base.html, descomente a linha abaixo -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"> -->

{% endblock %}